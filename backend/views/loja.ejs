<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loja do comerciante</title>
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/loja.css" />
    <link rel="stylesheet" href="/css/img.css" />
    <link rel="stylesheet" href="/css/font.css" />
  </head>
  <body>
    <%- include('partials/header') %>

    <div class="barra">
      <div class="avaliacoes">
        <h2>Mercearia do Bairro</h2>
        <br />
        <p>5/5</p>
        <p>Av. Dom Carlos I 4, 1200-649 Lisboa</p>
        <p>Mercearia</p>
      </div>
    </div>

    <br />

    <div class="container-produto">
      <div class="produto">
        <img src="img/cenoura.jpg" />
        <h2>Cenoura 1kg</h2>
        <br />
        <h1>0,79€</h1>
        <input class="input-size" type="number" value="1" min="1" />
        <br />
        <button class="add_carrinho">Adicionar</button>
      </div>
    </div>

    <div class="container">
      <h1>Avalie-nos</h1>
      <form id="ratingForm">
        <div class="star-rating">
          <input type="radio" name="rating" id="star1" value="1" /><label
            for="star1"
            >&#9733;</label
          >
          <input type="radio" name="rating" id="star2" value="2" /><label
            for="star2"
            >&#9733;</label
          >
          <input type="radio" name="rating" id="star3" value="3" /><label
            for="star3"
            >&#9733;</label
          >
          <input type="radio" name="rating" id="star4" value="4" /><label
            for="star4"
            >&#9733;</label
          >
          <input type="radio" name="rating" id="star5" value="5" /><label
            for="star5"
            >&#9733;</label
          >
        </div>
        <textarea id="comment" placeholder="Deixe um comentário"></textarea>
        <button type="button" onclick="submitRating()">Enviar Avaliação</button>
      </form>
      <div id="reviews">
        <h2>Avaliações</h2>
      </div>
    </div>
    <%- include('partials/footer') %>
    <script>
      function submitRating() {
        const rating = document.querySelector('input[name="rating"]:checked');
        const comment = document.getElementById("comment").value;

        if (rating && comment) {
          const review = document.createElement("div");
          review.classList.add("review");

          const stars = document.createElement("div");
          stars.classList.add("stars");
          stars.innerHTML =
            "&#9733;".repeat(rating.value) + "&#9734;".repeat(5 - rating.value);
          review.appendChild(stars);

          const commentText = document.createElement("p");
          commentText.textContent = comment;
          review.appendChild(commentText);

          document.getElementById("reviews").appendChild(review);

          document.getElementById("ratingForm").reset();
        } else {
          alert("Por favor, preencha a avaliação e o comentário.");
        }
      }
    </script>
  </body>
</html>
